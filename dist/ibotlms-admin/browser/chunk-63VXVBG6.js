import{b as k,d as a,f as I,g as L,h as $,i as ee,j as q,l as te,m as ne,q as j,r as ie,s as C,t as E,u as oe}from"./chunk-QF7N2OAQ.js";import{a as Y,c as Z,d as O,k as F,l as N,o as u}from"./chunk-466DJSEZ.js";import{Ab as n,B as W,Bb as o,Cb as p,Gb as Q,Jb as _,Sa as h,Uc as S,Vb as X,Wa as l,Wb as s,Xa as g,Y as J,Z as x,ac as D,ba as K,bc as G,cc as T,dc as w,ec as P,ga as y,ha as M,m as H,oa as v,pa as b,qb as U,rb as m}from"./chunk-BJFONNTD.js";import"./chunk-EQDQRRRY.js";var d=class r{constructor(e){this.http=e}apiUrl=oe.apiUrl;login(e,t){let i={email:e,password:t};return console.log("Sending login request with body:",i),this.http.post(`${this.apiUrl}/user/signin/`,i)}signup(e){let t=new Y({"Content-Type":"application/json"});return console.log("Sending signup request with payload:",e),this.http.post(`${this.apiUrl}/user/signup`,e,{headers:t}).pipe(W(i=>(console.error("Signup error in AuthService:",i),H(i))))}isAuthenticated(){return!!localStorage.getItem("token")}getUserRole(){return localStorage.getItem("role")}setUserRole(e){localStorage.setItem("role",e)}static \u0275fac=function(t){return new(t||r)(K(Z))};static \u0275prov=J({token:r,factory:r.\u0275fac,providedIn:"root"})};var z=class r{constructor(e,t){this.authService=e;this.router=t}email="";password="";logo="assets/logo.png";card="assets/branding.png";ngOnInit(){console.log("LoginComponent initialized")}onSubmit(){this.authService.login(this.email,this.password).subscribe(e=>{console.log("Login successful",e),console.log("Token:",e.session.token),localStorage.setItem("token",e.session.token),localStorage.setItem("userId",e.data.user_id),e.data.role==="admin"?this.router.navigate(["/admin/home/statistics"]):this.router.navigate(["/user/home"])},e=>{console.error("Login failed",e)})}static \u0275fac=function(t){return new(t||r)(g(d),g(F))};static \u0275cmp=y({type:r,selectors:[["app-login"]],standalone:!0,features:[w([d]),P],decls:26,vars:6,consts:[["loginForm","ngForm"],[1,"wrapper"],[1,"container"],[1,"left-panel"],["alt","Illustration"],[1,"right-panel"],[1,"login-container"],[1,"logo"],["alt","Logo"],[3,"ngSubmit"],["for","email"],["type","email","id","email","name","email","required","",3,"ngModelChange","ngModel"],["for","password"],["type","password","id","password","name","password","required","",3,"ngModelChange","ngModel"],["type","submit",3,"disabled"],[3,"routerLink"]],template:function(t,i){if(t&1){let f=Q();n(0,"div",1)(1,"div",2)(2,"div",3),p(3,"img",4),o(),n(4,"div",5)(5,"div",6)(6,"div",7),p(7,"img",8),o(),n(8,"h2"),s(9,"Login"),o(),n(10,"form",9,0),_("ngSubmit",function(){return v(f),b(i.onSubmit())}),n(12,"div")(13,"label",10),s(14,"Email:"),o(),n(15,"input",11),T("ngModelChange",function(c){return v(f),G(i.email,c)||(i.email=c),b(c)}),o()(),n(16,"div")(17,"label",12),s(18,"Password:"),o(),n(19,"input",13),T("ngModelChange",function(c){return v(f),G(i.password,c)||(i.password=c),b(c)}),o()(),n(20,"button",14),s(21,"Login"),o()(),n(22,"p"),s(23,"Don\u2019t have an account? "),n(24,"a",15),s(25,"Sign up"),o()()()()()()}if(t&2){let f=X(11);l(3),U("src",i.card,h),l(4),U("src",i.logo,h),l(8),D("ngModel",i.email),l(4),D("ngModel",i.password),l(),m("disabled",!f.valid),l(4),m("routerLink","/auth/signup")}},dependencies:[C,q,k,I,L,j,ee,$,O,u,N],styles:["*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box;font-family:Arial,sans-serif}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%;background-color:#f5f5f5;display:flex;justify-content:center;align-items:center}.wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%;height:100vh}.container[_ngcontent-%COMP%]{display:flex;max-width:800px;width:100%;background-color:#fff;box-shadow:0 4px 8px #0000001a;border-radius:8px}.left-panel[_ngcontent-%COMP%], .right-panel[_ngcontent-%COMP%]{flex:1;padding:20px}.left-panel[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;height:auto}.left-panel[_ngcontent-%COMP%]{width:50%;background-color:#1c629f;color:#fff;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:20px;text-align:center}.left-panel[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:230%;max-width:350px;margin-bottom:20px}.left-panel[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8em}.right-panel[_ngcontent-%COMP%]{width:50%;display:flex;align-items:center;justify-content:center;padding:40px}.login-container[_ngcontent-%COMP%]{width:100%;max-width:350px;text-align:center;display:flex;flex-direction:column;align-items:center}.logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:60px;height:60px;margin-bottom:20px}form[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin-bottom:15px;text-align:left}form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.9em;color:#333}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ccc;border-radius:5px;font-size:1em}button[_ngcontent-%COMP%]{width:100%;padding:10px;background-color:#4a8ce8e2;color:#fff;border:none;border-radius:5px;font-size:1em;cursor:pointer}button[_ngcontent-%COMP%]:disabled{background-color:#aaa}p[_ngcontent-%COMP%]{margin-top:20px;font-size:.9em}p[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#4caf50;text-decoration:none}p[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}"]})};var A=class r{constructor(e,t,i){this.formBuilder=e;this.authService=t;this.router=i}signupForm;logo="../../assets/logo.png";card="../../assets/signup.png";ngOnInit(){console.log("SignupComponent initialized"),this.signupForm=this.formBuilder.group({name:["",[a.required,a.minLength(3)]],phone:["",[a.required,a.pattern("^[0-9]{10,15}$")]],email:["",[a.required,a.email]],password:["",[a.required,a.minLength(6)]],street:["",a.required],city:["",a.required],state:["",a.required],country:["",a.required],pin:["",[a.required,a.pattern("^[0-9]{5,6}$")]]})}get f(){return this.signupForm.controls}onSubmit(){if(this.signupForm.invalid)return;let e={name:this.signupForm.value.name,email:this.signupForm.value.email,password:this.signupForm.value.password,phone:this.signupForm.value.phone,addresses:[{street:this.signupForm.value.street,city:this.signupForm.value.city,state:this.signupForm.value.state,zip:this.signupForm.value.pin,country:this.signupForm.value.country}],role:"user"};this.authService.signup(e).subscribe({next:t=>{this.router.navigate(["/auth/login"])},error:t=>{console.error("Signup failed",t)}})}static \u0275fac=function(t){return new(t||r)(g(ie),g(d),g(F))};static \u0275cmp=y({type:r,selectors:[["app-signup"]],standalone:!0,features:[w([d]),P],decls:32,vars:5,consts:[[1,"wrapper"],[1,"container"],[1,"left-side"],[1,"left-content"],["alt","Illustration",3,"src"],[1,"right-side"],[1,"signup-container"],[1,"form-header"],["alt","Logo",1,"logo",3,"src"],[3,"ngSubmit","formGroup"],[1,"form-group"],["type","text","id","name","formControlName","name","placeholder","Name","required",""],["type","text","id","phone","formControlName","phone","placeholder","Phone No","required",""],["type","email","id","email","formControlName","email","placeholder","Email","required",""],["type","password","id","password","formControlName","password","placeholder","Password","required",""],["type","text","id","street","formControlName","street","placeholder","Street","required",""],["type","text","id","city","formControlName","city","placeholder","City","required",""],["type","text","id","state","formControlName","state","placeholder","State","required",""],["type","text","id","country","formControlName","country","placeholder","Country","required",""],["type","text","id","pin","formControlName","pin","placeholder","Pin","required",""],["type","submit",3,"disabled"],[1,"login-link"],[3,"routerLink"]],template:function(t,i){t&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),p(4,"img",4),o()(),n(5,"div",5)(6,"div",6)(7,"div",7),p(8,"img",8),n(9,"h2"),s(10,"Sign Up"),o()(),n(11,"form",9),_("ngSubmit",function(){return i.onSubmit()}),n(12,"div",10),p(13,"input",11)(14,"input",12),o(),p(15,"input",13)(16,"input",14),n(17,"p"),s(18,"Address"),o(),p(19,"input",15),n(20,"div",10),p(21,"input",16)(22,"input",17),o(),n(23,"div",10),p(24,"input",18)(25,"input",19),o(),n(26,"button",20),s(27,"SIGN UP"),o(),n(28,"p",21),s(29,"Already have an account? "),n(30,"a",22),s(31,"Log in"),o()()()()()()()),t&2&&(l(4),m("src",i.card,h),l(4),m("src",i.logo,h),l(3),m("formGroup",i.signupForm),l(15),m("disabled",i.signupForm.invalid),l(4),m("routerLink","/auth/login"))},dependencies:[S,E,q,k,I,L,j,te,ne,C,u,N],styles:["*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box;font-family:Arial,sans-serif}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%;background-color:#f5f5f5;display:flex;justify-content:center;align-items:center}.wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%;height:100vh}.container[_ngcontent-%COMP%]{display:flex;max-width:800px;width:100%;background-color:#fff;box-shadow:0 4px 8px #0000001a;border-radius:8px}.left-side[_ngcontent-%COMP%], .right-side[_ngcontent-%COMP%]{flex:1;padding:20px}.left-side[_ngcontent-%COMP%]{width:50%;display:flex;justify-content:center;align-items:center;background-size:cover;background-position:center;background-repeat:no-repeat;background-color:#4caf50}.left-content[_ngcontent-%COMP%]{display:flex;color:#fff;font-size:24px;font-weight:700;text-align:center;max-width:80%}.left-side[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:130%;max-width:300px;margin-bottom:20px}.signup-image[_ngcontent-%COMP%]{max-width:50%}.right-side[_ngcontent-%COMP%]{width:50%;display:flex;justify-content:center;align-items:center;padding:40px}.signup-container[_ngcontent-%COMP%]{width:80%;max-width:400px}.form-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;margin-bottom:20px}.logo[_ngcontent-%COMP%]{width:40px;height:40px}h2[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:#333}form[_ngcontent-%COMP%]{display:flex;flex-direction:column}.form-group[_ngcontent-%COMP%]{display:flex;gap:10px;margin:10px 0}input[type=text][_ngcontent-%COMP%], input[type=email][_ngcontent-%COMP%], input[type=password][_ngcontent-%COMP%]{width:100%;padding:10px;border-radius:20px;border:1px solid #333;margin-bottom:10px}button[_ngcontent-%COMP%]{width:100%;padding:10px;border-radius:20px;background-color:#4caf50;color:#fff;font-weight:700;border:none;cursor:pointer;font-size:16px;margin-top:10px}button[_ngcontent-%COMP%]:hover{background-color:#45a049}.login-link[_ngcontent-%COMP%]{text-align:center;margin-top:20px;font-size:14px}.login-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#4caf50;text-decoration:none}.login-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}"]})};var de=[{path:"login",component:z},{path:"signup",component:A}],V=class r{static \u0275fac=function(t){return new(t||r)};static \u0275mod=M({type:r});static \u0275inj=x({imports:[u.forChild(de),u]})};var ae=class r{static \u0275fac=function(t){return new(t||r)};static \u0275mod=M({type:r});static \u0275inj=x({imports:[S,C,E,V,O]})};export{ae as AuthModule};
